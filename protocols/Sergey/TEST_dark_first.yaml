name: TEST_dark_first
description: "Dark\u2192Light batch sweep"
steps:
- action: smu/connect
  params:
    channel: 2
    mock: true
- action: smu/connect
  params:
    channel: 1
    mock: true
- action: relays/connect
  params:
    mock: true
- action: smu/configure
  params:
    channel: 2
    nplc: 1
    compliance: 0.1
- action: smu/configure
  params:
    channel: 1
    nplc: 1
    compliance: 10
    mode: CURR
- action: loop
  params:
    variable: pixel
    sequence:
    - 1
    - 2
    - 3
    - 4
    - 5
    - 6
    - 7
    - 8
  steps:
  - action: relays/pixel
    params:
      pixel_id: ${pixel}
  - action: smu/sweep
    params:
      channel: 2
      start: -0.2
      stop: 1.2
      points: 50
      delay: 0.01
      sweep_type: double
    capture: iv_data
  - action: data/save
    params:
      filename: TEST_P${pixel}_drk
      folder: ./data
      source: iv_data
- action: loop
  params:
    variable: pixel
    sequence:
    - 1
    - 2
    - 3
    - 4
    - 5
    - 6
    - 7
    - 8
  steps:
  - action: relays/pixel
    params:
      pixel_id: ${pixel}
  - action: smu/set
    params:
      channel: 1
      value: 0.001
  - action: smu/output
    params:
      channel: 1
      enabled: true
  - action: delay
    params:
      seconds: 0.5
  - action: smu/sweep
    params:
      channel: 2
      start: -0.2
      stop: 1.2
      points: 50
      delay: 0.01
      sweep_type: double
    capture: iv_data
  - action: data/save
    params:
      filename: TEST_P${pixel}_lit
      folder: ./data
      source: iv_data
  - action: smu/output
    params:
      channel: 1
      enabled: false
- action: smu/output
  params:
    channel: 2
    enabled: false
- action: smu/output
  params:
    channel: 1
    enabled: false
